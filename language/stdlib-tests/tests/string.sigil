âŸ¦ Comprehensive tests for stdlibâ‹…string âŸ§

i stdlibâ‹…string

Î»main()â†’ğ•Œ=()

âŸ¦ Test # operator on strings âŸ§
test "# returns string length" {
  #"hello"=5
}

test "# works on empty string" {
  #""=0
}

test "# works on unicode strings" {
  #"ğŸš€"=2
}

âŸ¦ Test # operator on lists âŸ§
test "# returns list length" {
  #[1,2,3]=3
}

test "char_at at index 0" {
  stdlibâ‹…string.char_at("hello",0)="h"
}

test "char_at at middle index" {
  stdlibâ‹…string.char_at("hello",2)="l"
}

test "drop first n characters" {
  stdlibâ‹…string.drop("hello",2)="llo"
}

test "drop with 0" {
  stdlibâ‹…string.drop("hello",0)="hello"
}

test "ends_with actual suffix" {
  stdlibâ‹…string.ends_with("file.txt",".txt")=âŠ¤
}

test "ends_with non-suffix" {
  stdlibâ‹…string.ends_with("hello",".txt")=âŠ¥
}

test "index_of finds occurrence" {
  stdlibâ‹…string.index_of("hello world","o")=4
}

test "index_of not found" {
  stdlibâ‹…string.index_of("hello","z")=-1
}

test "int_to_string negative" {
  stdlibâ‹…string.int_to_string(-10)="-10"
}

test "int_to_string positive" {
  stdlibâ‹…string.int_to_string(42)="42"
}

test "int_to_string zero" {
  stdlibâ‹…string.int_to_string(0)="0"
}

test "is_digit letter" {
  stdlibâ‹…string.is_digit("a")=âŠ¥
}

test "is_digit multi-character" {
  stdlibâ‹…string.is_digit("42")=âŠ¥
}

test "is_digit single" {
  stdlibâ‹…string.is_digit("5")=âŠ¤
}

test "is_whitespace empty" {
  stdlibâ‹…string.is_whitespace("")=âŠ¤
}

test "is_whitespace non-whitespace" {
  stdlibâ‹…string.is_whitespace("hello")=âŠ¥
}

test "is_whitespace spaces" {
  stdlibâ‹…string.is_whitespace("   ")=âŠ¤
}

test "join empty list" {
  stdlibâ‹…string.join([],",")=""
}

test "join with separator" {
  stdlibâ‹…string.join(["a","b","c"],",")="a,b,c"
}

test "replace_all all occurrences" {
  stdlibâ‹…string.replace_all("hello world","o","0")="hell0 w0rld"
}

test "replace_all no matches" {
  stdlibâ‹…string.replace_all("hello","z","x")="hello"
}

test "split by delimiter" {
  stdlibâ‹…string.split("a,b,c",",")=["a","b","c"]
}

test "split single element" {
  stdlibâ‹…string.split("hello",",")=["hello"]
}

test "starts_with non-prefix" {
  stdlibâ‹…string.starts_with("hello","abc")=âŠ¥
}

test "starts_with prefix" {
  stdlibâ‹…string.starts_with("hello","hel")=âŠ¤
}

test "substring full string" {
  stdlibâ‹…string.substring("hello",0,5)="hello"
}

test "substring portion" {
  stdlibâ‹…string.substring("hello",1,4)="ell"
}

test "take first n" {
  stdlibâ‹…string.take("hello",3)="hel"
}

test "take n greater than length" {
  stdlibâ‹…string.take("hi",10)="hi"
}

test "to_lower converts uppercase" {
  stdlibâ‹…string.to_lower("HELLO")="hello"
}

test "to_lower preserves lowercase" {
  stdlibâ‹…string.to_lower("hello")="hello"
}

test "to_upper converts lowercase" {
  stdlibâ‹…string.to_upper("hello")="HELLO"
}

test "to_upper preserves uppercase" {
  stdlibâ‹…string.to_upper("HELLO")="HELLO"
}

test "trim both sides" {
  stdlibâ‹…string.trim("  hello  ")="hello"
}

test "trim leading" {
  stdlibâ‹…string.trim("  hello")="hello"
}

test "trim trailing" {
  stdlibâ‹…string.trim("hello  ")="hello"
}

âŸ¦ Integration test: parse markdown title âŸ§
test "extract title from markdown" {
  l content="# Hello World\nContent here";
  l lines=stdlibâ‹…string.split("\n",content);
  l first=lines[0];
  l title=stdlibâ‹…string.starts_with("# ",first){
    âŠ¤â†’stdlibâ‹…string.substring(#first,2,first)|
    âŠ¥â†’"Untitled"
  };
  title="Hello World"
}
