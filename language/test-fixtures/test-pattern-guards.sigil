âŸ¦ Pattern Guards Test

  Tests the new `when` keyword for conditional pattern matching.

  Syntax: pattern when guard_expr â†’ body

  The guard expression is evaluated after pattern bindings are established
  and must have type ğ”¹ (boolean).
âŸ§

âŸ¦ Sum type for Test 4 âŸ§
t Result=Ok(â„¤)|Err(ğ•Š)

e console

âŸ¦ Test 1: Simple guards with literal patterns âŸ§
Î»test1(x:â„¤)â†’ğ•Šâ‰¡x{
  0 when âŠ¤ â†’ "zero" |
  1 â†’ "one" |
  _ â†’ "other"
}

âŸ¦ Test 2: Guards with pattern bindings âŸ§
Î»test2(x:â„¤)â†’ğ•Šâ‰¡x{
  n when n>10 â†’ "big" |
  n when n>0 â†’ "small positive" |
  n â†’ "zero or negative"
}

âŸ¦ Test 3: Fall-through when guard fails âŸ§
Î»test3(x:â„¤,flag:ğ”¹)â†’ğ•Šâ‰¡x{
  1 when flag â†’ "one with flag" |
  1 â†’ "one without flag" |
  _ â†’ "other"
}

âŸ¦ Test 4: Sum type with guards âŸ§
Î»test4(r:Result)â†’ğ•Šâ‰¡r{
  Ok(n) when n>100 â†’ "big success" |
  Ok(n) when n>0 â†’ "small success" |
  Ok(_) â†’ "zero or negative" |
  Err(msg) â†’ "error: "++msg
}

âŸ¦ Test 5: Complex guards âŸ§
Î»test5(x:â„¤,y:â„¤)â†’ğ•Šâ‰¡x{
  a when a>0âˆ§y>0 â†’ "both positive" |
  a when a>0âˆ¨y>0 â†’ "one positive" |
  _ â†’ "neither positive"
}

âŸ¦ Test 6: Backward compatibility - no guards âŸ§
Î»test6(x:â„¤)â†’ğ•Šâ‰¡x{
  0 â†’ "zero" |
  1 â†’ "one" |
  _ â†’ "other"
}

âŸ¦ Run tests âŸ§
Î»main()â†’â„¤â‰¡{
  l r1=test1(0);
  l r2=test2(15);
  l r3=test3(1,âŠ¤);
  l r4=test4(Ok(150));
  l r5=test5(5,10);
  l r6=test6(0);
  0
}
