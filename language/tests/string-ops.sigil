âŸ¦ String Operations Tests

   Comprehensive tests for # operator and stdlib string operations.
âŸ§

i stdlibâ‹…string
i stdlibâ‹…string

âŸ¦ Test # operator on strings âŸ§
Î»main()â†’ğ•Œ=()

test "# returns string length" {
  #"hello"=5
}

test "# works on empty string" {
  #""=0
}

test "# works on unicode strings" {
  #"ğŸš€"=2
}

âŸ¦ Test # operator on lists âŸ§
test "# returns list length" {
  #[1,2,3]=3
}

test "# works on empty list" {
  #[]=[â„¤]=0
}

âŸ¦ Test string_ops.char_at âŸ§
test "char_at gets character at index" {
  stdlibâ‹…string.char_at("hello",0)="h"
}

test "char_at gets last character" {
  stdlibâ‹…string.char_at("hello",4)="o"
}

âŸ¦ Test string_ops.substring âŸ§
test "substring extracts middle portion" {
  stdlibâ‹…string.substring("hello world",6,11)="world"
}

test "substring from start" {
  stdlibâ‹…string.substring("hello",0,3)="hel"
}

âŸ¦ Test string_ops.take and drop âŸ§
test "take gets first n characters" {
  stdlibâ‹…string.take("hello",3)="hel"
}

test "drop removes first n characters" {
  stdlibâ‹…string.drop("hello",2)="llo"
}

âŸ¦ Test string_ops transformations âŸ§
test "to_upper converts to uppercase" {
  stdlibâ‹…string.to_upper("hello")="HELLO"
}

test "to_lower converts to lowercase" {
  stdlibâ‹…string.to_lower("WORLD")="world"
}

test "trim removes whitespace" {
  stdlibâ‹…string.trim("  hello  ")="hello"
}

âŸ¦ Test string_ops.split âŸ§
test "split divides string by delimiter" {
  l parts=stdlibâ‹…string.split("a,b,c",",");
  #parts=3
}

test "split with newlines" {
  l lines=stdlibâ‹…string.split("line1\nline2","\n");
  #lines=2
}

âŸ¦ Test string_ops.index_of âŸ§
test "index_of finds substring" {
  stdlibâ‹…string.index_of("hello world","world")=6
}

test "index_of returns -1 when not found" {
  stdlibâ‹…string.index_of("hello","xyz")=-1
}

âŸ¦ Test string_ops.replace_all âŸ§
test "replace_all replaces all occurrences" {
  stdlibâ‹…string.replace_all("hello hello","hello","hi")="hi hi"
}

âŸ¦ Test string_predicates âŸ§
test "starts_with checks prefix" {
  stdlibâ‹…string.starts_with("# Title","# ")
}

test "starts_with returns false when no match" {
  Â¬stdlibâ‹…string.starts_with("Title","# ")
}

test "ends_with checks suffix" {
  stdlibâ‹…string.ends_with("test.sigil",".sigil")
}

test "ends_with returns false when no match" {
  Â¬stdlibâ‹…string.ends_with("test.txt",".sigil")
}

âŸ¦ Integration test: parse markdown title âŸ§
test "extract title from markdown" {
  l content="# Hello World\nContent here";
  l lines=stdlibâ‹…string.split(content,"\n");
  l first=lines[0];
  l title=stdlibâ‹…string.starts_with(first,"# "){
    âŠ¤â†’stdlibâ‹…string.substring(first,2,#first)|
    âŠ¥â†’"Untitled"
  };
  title="Hello World"
}

